{"version":3,"file":"index-d7ORSDgP.js","sources":["../../src/core/Engine.ts","../../src/core/Renderer.ts","../../src/core/Storage.ts","../../src/core/InputHandler.ts","../../src/main.ts"],"sourcesContent":["import { Tile, Position } from './types';\n\nexport class Engine {\n    private size: number = 4;\n    private grid: (Tile | null)[][] = [];\n    private score: number = 0;\n    private tileIdCounter: number = 0;\n\n    constructor() {\n        this.reset();\n    }\n\n    reset(): void {\n        this.grid = Array(this.size).fill(null).map(() => Array(this.size).fill(null));\n        this.score = 0;\n        this.tileIdCounter = 0;\n    }\n\n    getGrid(): (Tile | null)[][] {\n        return this.grid;\n    }\n\n    getScore(): number {\n        return this.score;\n    }\n\n    setScore(score: number): void {\n        this.score = score;\n    }\n\n    getGridValues(): number[][] {\n        return this.grid.map(row => row.map(tile => tile ? tile.value : 0));\n    }\n\n    restoreGrid(values: number[][]): void {\n        this.grid = values.map((row, r) =>\n            row.map((value, c) => {\n                if (value === 0) return null;\n                return this.createTile(r, c, value, false);\n            })\n        );\n    }\n\n    createTile(row: number, col: number, value: number, isNew: boolean = true): Tile {\n        return {\n            id: this.tileIdCounter++,\n            value,\n            row,\n            col,\n            previousRow: null,\n            previousCol: null,\n            mergedFrom: null,\n            isNew\n        };\n    }\n\n    addRandomTile(): Tile | null {\n        const emptyCells: Position[] = [];\n        for (let row = 0; row < this.size; row++) {\n            for (let col = 0; col < this.size; col++) {\n                if (!this.grid[row][col]) {\n                    emptyCells.push({ row, col });\n                }\n            }\n        }\n\n        if (emptyCells.length === 0) return null;\n\n        const { row, col } = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n        const value = Math.random() < 0.9 ? 2 : 4;\n        const tile = this.createTile(row, col, value, true);\n        this.grid[row][col] = tile;\n        return tile;\n    }\n\n    prepareTiles(): void {\n        for (let row = 0; row < this.size; row++) {\n            for (let col = 0; col < this.size; col++) {\n                const tile = this.grid[row][col];\n                if (tile) {\n                    tile.mergedFrom = null;\n                    tile.isNew = false;\n                    tile.previousRow = tile.row;\n                    tile.previousCol = tile.col;\n                }\n            }\n        }\n    }\n\n    move(direction: 'up' | 'down' | 'left' | 'right'): { moved: boolean, scoreGain: number, winDetected: boolean } {\n        let moved = false;\n        let scoreGain = 0;\n        let winDetected = false;\n\n        const vectors: Record<string, { row: number; col: number }> = {\n            up: { row: -1, col: 0 },\n            down: { row: 1, col: 0 },\n            left: { row: 0, col: -1 },\n            right: { row: 0, col: 1 }\n        };\n\n        const vector = vectors[direction];\n        const traversals = this.buildTraversals(vector);\n\n        for (const row of traversals.rows) {\n            for (const col of traversals.cols) {\n                const tile = this.grid[row][col];\n                if (!tile) continue;\n\n                const { furthest, next } = this.findFurthestPosition(row, col, vector);\n\n                if (next) {\n                    const nextTile = this.grid[next.row][next.col];\n                    if (nextTile && nextTile.value === tile.value && !nextTile.mergedFrom) {\n                        const merged = this.createTile(next.row, next.col, tile.value * 2, false);\n                        merged.mergedFrom = [tile, nextTile];\n                        merged.previousRow = tile.row;\n                        merged.previousCol = tile.col;\n\n                        this.grid[tile.row][tile.col] = null;\n                        this.grid[next.row][next.col] = merged;\n\n                        tile.row = next.row;\n                        tile.col = next.col;\n\n                        scoreGain += merged.value;\n                        moved = true;\n\n                        if (merged.value === 2048) {\n                            winDetected = true;\n                        }\n                        continue;\n                    }\n                }\n\n                if (furthest.row !== row || furthest.col !== col) {\n                    this.grid[tile.row][tile.col] = null;\n                    this.grid[furthest.row][furthest.col] = tile;\n                    tile.row = furthest.row;\n                    tile.col = furthest.col;\n                    moved = true;\n                }\n            }\n        }\n\n        if (moved) {\n            this.score += scoreGain;\n        }\n\n        return { moved, scoreGain, winDetected };\n    }\n\n    private buildTraversals(vector: { row: number; col: number }): { rows: number[]; cols: number[] } {\n        const rows = Array.from({ length: this.size }, (_, i) => i);\n        const cols = Array.from({ length: this.size }, (_, i) => i);\n        if (vector.row === 1) rows.reverse();\n        if (vector.col === 1) cols.reverse();\n        return { rows, cols };\n    }\n\n    private findFurthestPosition(row: number, col: number, vector: { row: number; col: number }): { furthest: Position; next: Position | null } {\n        let previousRow = row;\n        let previousCol = col;\n        let currentRow = row + vector.row;\n        let currentCol = col + vector.col;\n\n        while (this.isWithinBounds(currentRow, currentCol) && !this.grid[currentRow][currentCol]) {\n            previousRow = currentRow;\n            previousCol = currentCol;\n            currentRow += vector.row;\n            currentCol += vector.col;\n        }\n\n        return {\n            furthest: { row: previousRow, col: previousCol },\n            next: this.isWithinBounds(currentRow, currentCol) ? { row: currentRow, col: currentCol } : null\n        };\n    }\n\n    private isWithinBounds(row: number, col: number): boolean {\n        return row >= 0 && row < this.size && col >= 0 && col < this.size;\n    }\n\n    movesAvailable(): boolean {\n        for (let row = 0; row < this.size; row++) {\n            for (let col = 0; col < this.size; col++) {\n                if (!this.grid[row][col]) return true;\n                const tile = this.grid[row][col]!;\n                if (col < this.size - 1) {\n                    const right = this.grid[row][col + 1];\n                    if (right && right.value === tile.value) return true;\n                }\n                if (row < this.size - 1) {\n                    const down = this.grid[row + 1][col];\n                    if (down && down.value === tile.value) return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n","import { Tile } from './types';\n\nexport class Renderer {\n    private gridElement: HTMLElement;\n    private scoreElement: HTMLElement;\n    private bestScoreElement: HTMLElement;\n    private gameMessage: HTMLElement;\n    private retryButton: HTMLButtonElement;\n    private undoButton: HTMLButtonElement;\n    private size: number = 4;\n    private animationDuration: number = 150;\n\n    constructor() {\n        this.gridElement = document.getElementById('grid')!;\n        this.scoreElement = document.getElementById('score')!;\n        this.bestScoreElement = document.getElementById('best-score')!;\n        this.gameMessage = document.getElementById('game-message')!;\n        this.retryButton = document.getElementById('retry') as HTMLButtonElement;\n        this.undoButton = document.getElementById('undo') as HTMLButtonElement;\n        this.setupGrid();\n    }\n\n    private setupGrid(): void {\n        this.gridElement.innerHTML = '';\n        for (let i = 0; i < this.size * this.size; i++) {\n            const cell = document.createElement('div');\n            cell.className = 'cell';\n            this.gridElement.appendChild(cell);\n        }\n    }\n\n    updateScore(score: number, bestScore: number): void {\n        this.scoreElement.textContent = score.toString();\n        this.bestScoreElement.textContent = bestScore.toString();\n    }\n\n    updateUndoButton(disabled: boolean): void {\n        this.undoButton.disabled = disabled;\n    }\n\n    clearTiles(): void {\n        const tiles = this.gridElement.querySelectorAll('.tile');\n        tiles.forEach(tile => tile.remove());\n    }\n\n    private getTileClass(value: number): string {\n        return value <= 2048 ? `tile-${value}` : 'tile-super';\n    }\n\n    private getCellPosition(row: number, col: number): { top: number; left: number; size: number } {\n        const cellIndex = row * this.size + col;\n        const cell = this.gridElement.children[cellIndex] as HTMLElement;\n        return {\n            top: cell.offsetTop,\n            left: cell.offsetLeft,\n            size: cell.offsetWidth\n        };\n    }\n\n    render(grid: (Tile | null)[][]): void {\n        const existingTiles = this.gridElement.querySelectorAll('.tile');\n        const currentTileIds = new Set<number>();\n\n        grid.flat().forEach(tile => {\n            if (tile) {\n                currentTileIds.add(tile.id);\n                tile.mergedFrom?.forEach(t => currentTileIds.add(t.id));\n            }\n        });\n\n        existingTiles.forEach(el => {\n            const id = parseInt(el.getAttribute('data-id') || '-1', 10);\n            if (!currentTileIds.has(id)) el.remove();\n        });\n\n        grid.forEach((row) => {\n            row.forEach((tile) => {\n                if (!tile) return;\n                if (tile.mergedFrom) {\n                    tile.mergedFrom.forEach(mergedTile => {\n                        this.renderTile(mergedTile, tile.row, tile.col, false, false);\n                    });\n                }\n                const isMerged = !!tile.mergedFrom;\n                this.renderTile(tile, tile.row, tile.col, tile.isNew, isMerged);\n            });\n        });\n    }\n\n    renderTile(tile: Tile, toRow: number, toCol: number, isNew: boolean, isMerged: boolean): void {\n        let element = this.gridElement.querySelector(`[data-id=\"${tile.id}\"]`) as HTMLElement;\n        const targetPos = this.getCellPosition(toRow, toCol);\n\n        if (!element) {\n            element = document.createElement('div');\n            element.setAttribute('data-id', tile.id.toString());\n            element.className = `tile ${this.getTileClass(tile.value)}`;\n            element.textContent = tile.value.toString();\n            element.style.width = `${targetPos.size}px`;\n            element.style.height = `${targetPos.size}px`;\n\n            if (isNew) {\n                element.style.top = `${targetPos.top}px`;\n                element.style.left = `${targetPos.left}px`;\n                element.classList.add('tile-new');\n            } else if (isMerged) {\n                element.style.top = `${targetPos.top}px`;\n                element.style.left = `${targetPos.left}px`;\n                element.style.opacity = '0';\n                element.style.transform = 'scale(0)';\n            } else if (tile.previousRow !== null && tile.previousCol !== null) {\n                const fromPos = this.getCellPosition(tile.previousRow, tile.previousCol);\n                element.style.top = `${fromPos.top}px`;\n                element.style.left = `${fromPos.left}px`;\n            } else {\n                element.style.top = `${targetPos.top}px`;\n                element.style.left = `${targetPos.left}px`;\n            }\n\n            this.gridElement.appendChild(element);\n            element.offsetHeight; // trigger reflow\n        }\n\n        element.style.top = `${targetPos.top}px`;\n        element.style.left = `${targetPos.left}px`;\n\n        if (isMerged) {\n            setTimeout(() => {\n                if (tile.mergedFrom) {\n                    tile.mergedFrom.forEach(t => {\n                        const sourceEl = this.gridElement.querySelector(`[data-id=\"${t.id}\"]`);\n                        if (sourceEl) sourceEl.remove();\n                    });\n                }\n                element.style.opacity = '1';\n                element.style.transform = 'scale(1)';\n                element.classList.add('tile-merged');\n                setTimeout(() => element.classList.remove('tile-merged'), 250);\n            }, this.animationDuration);\n        }\n    }\n\n    showInvalidMoveAnimation(direction: string): void {\n        const gameContainer = document.querySelector('.game-container') as HTMLElement;\n        gameContainer.classList.remove('shake-left', 'shake-right', 'shake-up', 'shake-down');\n        gameContainer.offsetHeight; // trigger reflow\n        gameContainer.classList.add(`shake-${direction}`);\n        setTimeout(() => gameContainer.classList.remove(`shake-${direction}`), 200);\n    }\n\n    showGameMessage(message: string, isWin: boolean, onRetry: (keepPlaying: boolean) => void): void {\n        const messageText = this.gameMessage.querySelector('p')!;\n        messageText.textContent = message;\n\n        if (isWin) {\n            this.retryButton.textContent = 'Keep Playing';\n            this.retryButton.onclick = () => onRetry(true);\n        } else {\n            this.retryButton.textContent = 'Try Again';\n            this.retryButton.onclick = () => onRetry(false);\n        }\n\n        this.gameMessage.classList.add('active');\n    }\n\n    hideGameMessage(): void {\n        this.gameMessage.classList.remove('active');\n    }\n}\n","export class Storage {\n    private static BEST_SCORE_KEY = '2048-best-score';\n    private static THEME_KEY = '2048-theme';\n\n    static getBestScore(): number {\n        const saved = localStorage.getItem(this.BEST_SCORE_KEY);\n        return saved ? parseInt(saved, 10) : 0;\n    }\n\n    static saveBestScore(score: number): void {\n        localStorage.setItem(this.BEST_SCORE_KEY, score.toString());\n    }\n\n    static getTheme(): string {\n        const urlParams = new URLSearchParams(window.location.search);\n        return urlParams.get('theme') || localStorage.getItem(this.THEME_KEY) || 'neon';\n    }\n\n    static saveTheme(theme: string): void {\n        localStorage.setItem(this.THEME_KEY, theme);\n        const url = new URL(window.location.href);\n        if (theme === 'neon') {\n            url.searchParams.delete('theme');\n        } else {\n            url.searchParams.set('theme', theme);\n        }\n        window.history.replaceState({}, '', url);\n    }\n\n    static updateUrlState(state: string, debugMode: boolean): void {\n        if (!debugMode) return;\n        const url = new URL(window.location.href);\n        url.searchParams.set('state', state);\n        window.history.replaceState({}, '', url);\n    }\n}\n","export class InputHandler {\n    private touchStartX: number = 0;\n    private touchStartY: number = 0;\n    private minSwipeDistance: number = 50;\n\n    constructor(\n        private onMove: (direction: 'up' | 'down' | 'left' | 'right') => void,\n        private onUndo: () => void,\n        private gridElement: HTMLElement\n    ) {\n        this.setupEventListeners();\n    }\n\n    private setupEventListeners(): void {\n        document.addEventListener('keydown', (e) => this.handleKeyDown(e));\n\n        this.gridElement.addEventListener('touchstart', (e) => {\n            this.touchStartX = e.touches[0].clientX;\n            this.touchStartY = e.touches[0].clientY;\n        }, { passive: true });\n\n        this.gridElement.addEventListener('touchmove', (e) => {\n            e.preventDefault();\n        }, { passive: false });\n\n        this.gridElement.addEventListener('touchend', (e) => {\n            if (!this.touchStartX || !this.touchStartY) return;\n\n            const touchEndX = e.changedTouches[0].clientX;\n            const touchEndY = e.changedTouches[0].clientY;\n\n            const deltaX = touchEndX - this.touchStartX;\n            const deltaY = touchEndY - this.touchStartY;\n\n            if (Math.abs(deltaX) > Math.abs(deltaY)) {\n                if (Math.abs(deltaX) > this.minSwipeDistance) {\n                    this.onMove(deltaX > 0 ? 'right' : 'left');\n                }\n            } else {\n                if (Math.abs(deltaY) > this.minSwipeDistance) {\n                    this.onMove(deltaY > 0 ? 'down' : 'up');\n                }\n            }\n        }, { passive: true });\n    }\n\n    private handleKeyDown(e: KeyboardEvent): void {\n        if (e.key === 'z' || e.key === 'Z') {\n            if (e.ctrlKey || e.metaKey || !e.shiftKey) {\n                e.preventDefault();\n                this.onUndo();\n                return;\n            }\n        }\n\n        let direction: 'up' | 'down' | 'left' | 'right' | null = null;\n        switch (e.key) {\n            case 'ArrowUp': case 'w': case 'W': direction = 'up'; break;\n            case 'ArrowDown': case 's': case 'S': direction = 'down'; break;\n            case 'ArrowLeft': case 'a': case 'A': direction = 'left'; break;\n            case 'ArrowRight': case 'd': case 'D': direction = 'right'; break;\n        }\n\n        if (direction) {\n            e.preventDefault();\n            this.onMove(direction);\n        }\n    }\n}\n","import './styles/main.scss';\nimport { Engine } from './core/Engine';\nimport { Renderer } from './core/Renderer';\nimport { Storage } from './core/Storage';\nimport { InputHandler } from './core/InputHandler';\nimport { GameState } from './core/types';\n\nclass App {\n    private engine: Engine;\n    private renderer: Renderer;\n    private history: GameState[] = [];\n    private maxHistoryLength: number = 50;\n    private isAnimating: boolean = false;\n    private gameOver: boolean = false;\n    private hasWon: boolean = false;\n    private keepPlaying: boolean = false;\n    private bestScore: number = 0;\n    private debugMode: boolean = false;\n\n    constructor() {\n        this.engine = new Engine();\n        this.renderer = new Renderer();\n        this.bestScore = Storage.getBestScore();\n\n        const themeSelect = document.getElementById('theme') as HTMLSelectElement;\n        const currentTheme = Storage.getTheme();\n        themeSelect.value = currentTheme;\n        this.applyTheme(currentTheme);\n\n        themeSelect.addEventListener('change', (e) => {\n            const theme = (e.target as HTMLSelectElement).value;\n            this.applyTheme(theme);\n            Storage.saveTheme(theme);\n            this.renderer.render(this.engine.getGrid());\n            themeSelect.blur();\n        });\n\n        document.getElementById('new-game')?.addEventListener('click', () => this.newGame());\n        document.getElementById('undo')?.addEventListener('click', () => this.undo());\n\n        new InputHandler(\n            (dir) => this.handleMove(dir),\n            () => this.undo(),\n            document.getElementById('grid')!\n        );\n\n        this.initFromUrl();\n    }\n\n    private applyTheme(theme: string): void {\n        document.body.className = '';\n        if (theme !== 'classic') {\n            document.body.classList.add(`theme-${theme}`);\n        }\n    }\n\n    private initFromUrl(): void {\n        const urlParams = new URLSearchParams(window.location.search);\n        this.debugMode = urlParams.get('debug') === 'true';\n        const state = urlParams.get('state');\n\n        if (state) {\n            this.loadStateFromString(state);\n        } else {\n            this.newGame();\n        }\n    }\n\n    private loadStateFromString(stateStr: string): void {\n        // Simple implementation for now, mirroring original logic\n        try {\n            const [scoreStr, gridStr] = stateStr.split('-');\n            const score = parseInt(scoreStr, 36);\n            const gridValues: number[][] = [];\n            for (let row = 0; row < 4; row++) {\n                gridValues[row] = [];\n                for (let col = 0; col < 4; col++) {\n                    const encoded = parseInt(gridStr[row * 4 + col], 16);\n                    gridValues[row][col] = encoded === 0 ? 0 : Math.pow(2, encoded);\n                }\n            }\n            this.engine.restoreGrid(gridValues);\n            this.engine.setScore(score);\n            this.history = [];\n            this.gameOver = false;\n            this.hasWon = false;\n            this.keepPlaying = false;\n            this.updateUI();\n        } catch (e) {\n            this.newGame();\n        }\n    }\n\n    private newGame(): void {\n        this.engine.reset();\n        this.history = [];\n        this.gameOver = false;\n        this.hasWon = false;\n        this.keepPlaying = false;\n        this.renderer.hideGameMessage();\n        this.renderer.clearTiles();\n        this.engine.addRandomTile();\n        this.engine.addRandomTile();\n        this.updateUI();\n    }\n\n    private handleMove(direction: 'up' | 'down' | 'left' | 'right'): void {\n        if (this.isAnimating || this.gameOver || (this.hasWon && !this.keepPlaying)) return;\n\n        this.saveState();\n        this.engine.prepareTiles();\n        const { moved, winDetected } = this.engine.move(direction);\n\n        if (moved) {\n            if (winDetected) this.hasWon = true;\n            this.isAnimating = true;\n            this.renderer.render(this.engine.getGrid());\n\n            setTimeout(() => {\n                const newTile = this.engine.addRandomTile();\n                if (newTile) this.renderer.renderTile(newTile, newTile.row, newTile.col, true, false);\n\n                if (this.debugMode) {\n                    Storage.updateUrlState(this.encodeState(), true);\n                }\n\n                setTimeout(() => {\n                    this.isAnimating = false;\n                    if (!this.engine.movesAvailable()) {\n                        this.gameOver = true;\n                        this.renderer.showGameMessage('Game Over!', false, (kp) => this.handleRetry(kp));\n                    } else if (this.hasWon && !this.keepPlaying) {\n                        this.renderer.showGameMessage('You Win!', true, (kp) => this.handleRetry(kp));\n                    }\n                }, 100);\n            }, 150);\n\n            if (this.engine.getScore() > this.bestScore) {\n                this.bestScore = this.engine.getScore();\n                Storage.saveBestScore(this.bestScore);\n            }\n            this.renderer.updateScore(this.engine.getScore(), this.bestScore);\n        } else {\n            this.history.pop();\n            this.renderer.updateUndoButton(this.history.length === 0);\n            this.renderer.showInvalidMoveAnimation(direction);\n        }\n    }\n\n    private handleRetry(keepPlaying: boolean): void {\n        if (keepPlaying) {\n            this.keepPlaying = true;\n            this.renderer.hideGameMessage();\n        } else {\n            this.newGame();\n        }\n    }\n\n    private undo(): void {\n        if (this.history.length === 0 || this.isAnimating) return;\n        const state = this.history.pop()!;\n        this.engine.restoreGrid(state.grid);\n        this.engine.setScore(state.score);\n        this.gameOver = false;\n        this.renderer.hideGameMessage();\n        this.updateUI();\n    }\n\n    private saveState(): void {\n        this.history.push({\n            grid: this.engine.getGridValues(),\n            score: this.engine.getScore()\n        });\n        if (this.history.length > this.maxHistoryLength) this.history.shift();\n        this.renderer.updateUndoButton(false);\n    }\n\n    private updateUI(): void {\n        this.renderer.updateScore(this.engine.getScore(), this.bestScore);\n        this.renderer.updateUndoButton(this.history.length === 0);\n        this.renderer.render(this.engine.getGrid());\n    }\n\n    private encodeState(): string {\n        const values = this.engine.getGridValues();\n        let gridStr = '';\n        values.flat().forEach(v => {\n            gridStr += (v === 0 ? 0 : Math.log2(v)).toString(16);\n        });\n        return this.engine.getScore().toString(36) + '-' + gridStr;\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => new App());\n"],"names":["Engine","score","row","tile","values","r","value","c","col","isNew","emptyCells","direction","moved","scoreGain","winDetected","vector","traversals","furthest","next","nextTile","merged","rows","_","i","cols","previousRow","previousCol","currentRow","currentCol","right","down","Renderer","cell","bestScore","disabled","cellIndex","grid","existingTiles","currentTileIds","t","el","id","mergedTile","isMerged","toRow","toCol","element","targetPos","fromPos","sourceEl","gameContainer","message","isWin","onRetry","messageText","Storage","saved","theme","url","state","debugMode","InputHandler","onMove","onUndo","gridElement","touchEndX","touchEndY","deltaX","deltaY","App","themeSelect","currentTheme","e","dir","urlParams","stateStr","scoreStr","gridStr","gridValues","encoded","newTile","kp","keepPlaying","v"],"mappings":"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"}