* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Classic theme (default) */
    --bg-color: #faf8ef;
    --container-bg: #bbada0;
    --text-color: #776e65;
    --text-light: #f9f6f2;
    --btn-bg: #8f7a66;
    --btn-hover: #9f8b77;
    --cell-bg: rgba(238, 228, 218, 0.35);
    --tile-2: #eee4da;
    --tile-4: #ede0c8;
    --tile-8: #f2b179;
    --tile-16: #f59563;
    --tile-32: #f67c5f;
    --tile-64: #f65e3b;
    --tile-128: #edcf72;
    --tile-256: #edcc61;
    --tile-512: #edc850;
    --tile-1024: #edc53f;
    --tile-2048: #edc22e;
    --tile-super: #edc22e;
    --tile-shadow: rgba(0, 0, 0, 0.1);
    --title-color: #776e65;
    --score-bg: #bbada0;
    --font-family: 'Clear Sans', 'Helvetica Neue', Arial, sans-serif;
    --tile-radius: 6px;
    --tile-font-weight: bold;
    --cell-border: none;
    --tile-border: none;
}

/* Neon Theme */
.theme-neon {
    --bg-color: #0a0a0f;
    --container-bg: #1a1a2e;
    --text-color: #fff;
    --text-light: #fff;
    --btn-bg: #e94560;
    --btn-hover: #ff6b6b;
    --cell-bg: rgba(255, 255, 255, 0.05);
    --tile-2: #ff00ff;
    --tile-4: #00ffff;
    --tile-8: #ff6600;
    --tile-16: #ff0066;
    --tile-32: #6600ff;
    --tile-64: #00ff66;
    --tile-128: #e6b800;
    --tile-256: #ff3399;
    --tile-512: #33ff99;
    --tile-1024: #9933ff;
    --tile-2048: #ff9933;
    --tile-super: #ff9933;
    --tile-shadow: 0 0 20px currentColor;
    --title-color: #e94560;
    --score-bg: #16213e;
    --font-family: 'Monoton', cursive;
    --tile-radius: 8px;
    --tile-font-weight: bold;
    --cell-border: 1px solid rgba(255, 255, 255, 0.1);
    --tile-border: 2px solid currentColor;
}

/* Minesweeper Theme */
.theme-minesweeper {
    --bg-color: #c0c0c0;
    --container-bg: #808080;
    --text-color: #000;
    --text-light: #000;
    --btn-bg: #c0c0c0;
    --btn-hover: #d4d4d4;
    --cell-bg: #bdbdbd;
    --tile-2: #c0c0c0;
    --tile-4: #c0c0c0;
    --tile-8: #c0c0c0;
    --tile-16: #c0c0c0;
    --tile-32: #c0c0c0;
    --tile-64: #c0c0c0;
    --tile-128: #c0c0c0;
    --tile-256: #c0c0c0;
    --tile-512: #c0c0c0;
    --tile-1024: #c0c0c0;
    --tile-2048: #ffff00;
    --tile-super: #ffff00;
    --tile-shadow: none;
    --title-color: #000080;
    --score-bg: #c0c0c0;
    --font-family: 'MS Sans Serif', 'Segoe UI', Tahoma, sans-serif;
    --tile-radius: 0;
    --tile-font-weight: bold;
    --cell-border: 2px inset #fff;
    --tile-border: 2px outset #fff;
}

/* Ocean Theme */
.theme-ocean {
    --bg-color: #0c2340;
    --container-bg: #1a4a6e;
    --text-color: #e0f4ff;
    --text-light: #fff;
    --btn-bg: #2e86ab;
    --btn-hover: #3a9fc4;
    --cell-bg: rgba(255, 255, 255, 0.1);
    --tile-2: #a8dadc;
    --tile-4: #81c3d7;
    --tile-8: #5ab4d1;
    --tile-16: #3a9fc4;
    --tile-32: #2e86ab;
    --tile-64: #1e6091;
    --tile-128: #48cae4;
    --tile-256: #00b4d8;
    --tile-512: #0096c7;
    --tile-1024: #0077b6;
    --tile-2048: #ffd700;
    --tile-super: #ffd700;
    --tile-shadow: 0 4px 15px rgba(0, 180, 216, 0.3);
    --title-color: #48cae4;
    --score-bg: #1e6091;
    --tile-radius: 12px;
    --tile-font-weight: 600;
    --cell-border: none;
    --tile-border: none;
}

/* Forest Theme */
.theme-forest {
    --bg-color: #1a2f1a;
    --container-bg: #2d4a2d;
    --text-color: #d4e6d4;
    --text-light: #fff;
    --btn-bg: #4a7c4a;
    --btn-hover: #5a8f5a;
    --cell-bg: rgba(255, 255, 255, 0.08);
    --tile-2: #a8d5a2;
    --tile-4: #8bc78b;
    --tile-8: #6eb86e;
    --tile-16: #52a952;
    --tile-32: #3d9a3d;
    --tile-64: #2d8a2d;
    --tile-128: #c9e4a6;
    --tile-256: #b5d990;
    --tile-512: #a1ce7a;
    --tile-1024: #8dc364;
    --tile-2048: #ffd700;
    --tile-super: #ffd700;
    --tile-shadow: 0 4px 12px rgba(61, 154, 61, 0.3);
    --title-color: #8bc78b;
    --score-bg: #3d6b3d;
    --tile-radius: 10px;
    --tile-font-weight: 600;
    --cell-border: none;
    --tile-border: none;
}

/* Sunset Theme */
.theme-sunset {
    --bg-color: #1a1a2e;
    --container-bg: #2d1f3d;
    --text-color: #ffecd2;
    --text-light: #fff;
    --btn-bg: #e85d75;
    --btn-hover: #f06d85;
    --cell-bg: rgba(255, 255, 255, 0.08);
    --tile-2: #fcb69f;
    --tile-4: #ff9a8b;
    --tile-8: #ff6b6b;
    --tile-16: #ee5a5a;
    --tile-32: #e85d75;
    --tile-64: #d63d5e;
    --tile-128: #ffecd2;
    --tile-256: #fcb69f;
    --tile-512: #ff9a76;
    --tile-1024: #ff7b54;
    --tile-2048: #ffd700;
    --tile-super: #ffd700;
    --tile-shadow: 0 4px 15px rgba(232, 93, 117, 0.4);
    --title-color: #fcb69f;
    --score-bg: #3d2a50;
    --tile-radius: 14px;
    --tile-font-weight: 600;
    --cell-border: none;
    --tile-border: none;
}

/* Lavender Theme */
.theme-lavender {
    --bg-color: #f3e8ff;
    --container-bg: #c4b5d4;
    --text-color: #4a3f55;
    --text-light: #fff;
    --btn-bg: #9b7bb8;
    --btn-hover: #a989c5;
    --cell-bg: rgba(255, 255, 255, 0.5);
    --tile-2: #e8d5f2;
    --tile-4: #dcc5e8;
    --tile-8: #d0b5de;
    --tile-16: #c4a5d4;
    --tile-32: #b895ca;
    --tile-64: #ac85c0;
    --tile-128: #dda0dd;
    --tile-256: #da70d6;
    --tile-512: #ba55d3;
    --tile-1024: #9932cc;
    --tile-2048: #ffd700;
    --tile-super: #ffd700;
    --tile-shadow: 0 4px 12px rgba(155, 123, 184, 0.3);
    --title-color: #7b5ea7;
    --score-bg: #b8a5c8;
    --tile-radius: 16px;
    --tile-font-weight: 600;
    --cell-border: none;
    --tile-border: none;
}

/* Terminal Theme */
.theme-terminal {
    --bg-color: #0d0d0d;
    --container-bg: #1a1a1a;
    --text-color: #00ff00;
    --text-light: #00ff00;
    --btn-bg: #003300;
    --btn-hover: #004400;
    --cell-bg: #0a0a0a;
    --tile-2: #001a00;
    --tile-4: #002600;
    --tile-8: #003300;
    --tile-16: #004000;
    --tile-32: #004d00;
    --tile-64: #005900;
    --tile-128: #006600;
    --tile-256: #007300;
    --tile-512: #008000;
    --tile-1024: #009900;
    --tile-2048: #00ff00;
    --tile-super: #00b300;
    --tile-shadow: 0 0 10px #00ff00;
    --title-color: #00ff00;
    --score-bg: #0a1a0a;
    --font-family: 'Courier New', 'Consolas', monospace;
    --tile-radius: 0;
    --tile-font-weight: normal;
    --cell-border: 1px solid #003300;
    --tile-border: 1px solid #00ff00;
}

/* Game Boy Theme */
.theme-gameboy {
    --bg-color: #9bbc0f;
    --container-bg: #8bac0f;
    --text-color: #0f380f;
    --text-light: #0f380f;
    --btn-bg: #306230;
    --btn-hover: #0f380f;
    --cell-bg: #9bbc0f;
    --tile-2: #8bac0f;
    --tile-4: #7b9c0f;
    --tile-8: #6b8c0f;
    --tile-16: #5b7c0f;
    --tile-32: #4b6c0f;
    --tile-64: #3b5c0f;
    --tile-128: #306230;
    --tile-256: #285228;
    --tile-512: #204220;
    --tile-1024: #183218;
    --tile-2048: #0f380f;
    --tile-super: #0f380f;
    --tile-shadow: none;
    --title-color: #0f380f;
    --score-bg: #306230;
    --font-family: 'Press Start 2P', 'Courier New', monospace;
    --tile-radius: 0;
    --tile-font-weight: normal;
    --cell-border: 2px solid #306230;
    --tile-border: none;
}

/* Cherry Blossom Theme */
.theme-cherry-blossom {
    --bg-color: #fff0f5;
    --container-bg: #f48fb1;
    --text-color: #d63384;
    --text-light: #fff;
    --btn-bg: #ff69b4;
    --btn-hover: #ff85c1;
    --cell-bg: rgba(255, 182, 193, 0.7);
    --tile-2: #ffe4ec;
    --tile-4: #ffd1dc;
    --tile-8: #ffb6c1;
    --tile-16: #ff9fb8;
    --tile-32: #ff85ae;
    --tile-64: #ff6ba4;
    --tile-128: #ff519a;
    --tile-256: #ff3790;
    --tile-512: #e91e86;
    --tile-1024: #c2185b;
    --tile-2048: #ffd700;
    --tile-super: #ffd700;
    --tile-shadow: 0 3px 10px rgba(255, 105, 180, 0.4);
    --title-color: #ff69b4;
    --score-bg: #ff69b4;
    --font-family: 'Dancing Script', 'Pacifico', cursive;
    --tile-radius: 50%;
    --tile-font-weight: 700;
    --cell-border: none;
    --tile-border: none;
}

/* Aurora Theme */
.theme-aurora {
    --bg-color: #0d1b2a;
    --container-bg: #1b263b;
    --text-color: #e0fbfc;
    --text-light: #fff;
    --btn-bg: #3d5a80;
    --btn-hover: #4a6fa5;
    --cell-bg: rgba(255, 255, 255, 0.05);
    --tile-2: #98c1d9;
    --tile-4: #77b6ea;
    --tile-8: #5dd39e;
    --tile-16: #3bceac;
    --tile-32: #0ead69;
    --tile-64: #45e3ff;
    --tile-128: #9d4edd;
    --tile-256: #c77dff;
    --tile-512: #e0aaff;
    --tile-1024: #7fd8be;
    --tile-2048: #fff;
    --tile-super: #fff;
    --tile-shadow: 0 0 20px currentColor;
    --title-color: #5dd39e;
    --score-bg: #3d5a80;
    --font-family: 'Helvetica Neue', Arial, sans-serif;
    --tile-radius: 8px;
    --tile-font-weight: 600;
    --cell-border: none;
    --tile-border: none;
}

/* Glassmorphism Theme */
.theme-glass {
    --bg-color: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --bg-solid: #667eea;
    --container-bg: rgba(255, 255, 255, 0.1);
    --text-color: #fff;
    --text-light: #fff;
    --btn-bg: rgba(255, 255, 255, 0.2);
    --btn-hover: rgba(255, 255, 255, 0.3);
    --cell-bg: rgba(255, 255, 255, 0.1);
    --tile-2: rgba(255, 255, 255, 0.2);
    --tile-4: rgba(255, 255, 255, 0.25);
    --tile-8: rgba(255, 200, 150, 0.4);
    --tile-16: rgba(255, 180, 120, 0.5);
    --tile-32: rgba(255, 150, 100, 0.5);
    --tile-64: rgba(255, 120, 80, 0.6);
    --tile-128: rgba(255, 220, 100, 0.5);
    --tile-256: rgba(255, 210, 80, 0.6);
    --tile-512: rgba(255, 200, 60, 0.6);
    --tile-1024: rgba(255, 190, 40, 0.7);
    --tile-2048: rgba(255, 255, 255, 0.9);
    --tile-super: rgba(255, 255, 255, 0.9);
    --tile-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    --title-color: #fff;
    --score-bg: rgba(255, 255, 255, 0.15);
    --font-family: 'Helvetica Neue', Arial, sans-serif;
    --tile-radius: 16px;
    --tile-font-weight: 600;
    --cell-border: 1px solid rgba(255, 255, 255, 0.2);
    --tile-border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Vaporwave Theme */
.theme-vaporwave {
    --bg-color: #1a1a2e;
    --container-bg: #16213e;
    --text-color: #ff71ce;
    --text-light: #fff;
    --btn-bg: #b967ff;
    --btn-hover: #c77dff;
    --cell-bg: rgba(255, 113, 206, 0.1);
    --tile-2: #ff71ce;
    --tile-4: #01cdfe;
    --tile-8: #05ffa1;
    --tile-16: #b967ff;
    --tile-32: #fffb96;
    --tile-64: #ff71ce;
    --tile-128: #01cdfe;
    --tile-256: #05ffa1;
    --tile-512: #b967ff;
    --tile-1024: #fffb96;
    --tile-2048: #fff;
    --tile-super: #fff;
    --tile-shadow: 0 0 15px currentColor;
    --title-color: #ff71ce;
    --score-bg: rgba(185, 103, 255, 0.3);
    --font-family: 'Arial Black', sans-serif;
    --tile-radius: 0;
    --tile-font-weight: bold;
    --cell-border: 2px solid #b967ff;
    --tile-border: none;
}

/* Blueprint Theme */
.theme-blueprint {
    --bg-color: #1e4d78;
    --container-bg: #2a5f8f;
    --text-color: #fff;
    --text-light: #fff;
    --btn-bg: #3a7fb5;
    --btn-hover: #4a8fc5;
    --cell-bg: rgba(255, 255, 255, 0.1);
    --tile-2: rgba(255, 255, 255, 0.15);
    --tile-4: rgba(255, 255, 255, 0.2);
    --tile-8: rgba(255, 255, 255, 0.25);
    --tile-16: rgba(255, 255, 255, 0.3);
    --tile-32: rgba(255, 255, 255, 0.35);
    --tile-64: rgba(255, 255, 255, 0.4);
    --tile-128: rgba(255, 255, 255, 0.5);
    --tile-256: rgba(255, 255, 255, 0.6);
    --tile-512: rgba(255, 255, 255, 0.7);
    --tile-1024: rgba(255, 255, 255, 0.8);
    --tile-2048: #fff;
    --tile-super: rgba(255, 255, 255, 0.9);
    --tile-shadow: none;
    --title-color: #fff;
    --score-bg: #3a7fb5;
    --font-family: 'Courier New', monospace;
    --tile-radius: 0;
    --tile-font-weight: normal;
    --cell-border: 1px solid rgba(255, 255, 255, 0.4);
    --tile-border: 2px solid rgba(255, 255, 255, 0.8);
}

/* Windows XP Theme */
.theme-winxp {
    --bg-color: #3a6ea5;
    --container-bg: #ece9d8;
    --text-color: #000;
    --text-light: #fff;
    --btn-bg: linear-gradient(180deg, #fff 0%, #ece9d8 50%, #d4d0c8 100%);
    --btn-hover: #ece9d8;
    --cell-bg: #d4d0c8;
    --tile-2: #f5f3eb;
    --tile-4: #ece9d8;
    --tile-8: #8cb330;
    --tile-16: #f9a01b;
    --tile-32: #ef6a1a;
    --tile-64: #e03c31;
    --tile-128: #5ea1d8;
    --tile-256: #4189c1;
    --tile-512: #3174ac;
    --tile-1024: #245d91;
    --tile-2048: #ffd700;
    --tile-super: #ffd700;
    --tile-shadow: none;
    --title-color: #fff;
    --score-bg: #0054e3;
    --font-family: 'Tahoma', 'Segoe UI', sans-serif;
    --tile-radius: 3px;
    --tile-font-weight: bold;
    --cell-border: 1px solid #aca899;
    --tile-border: none;
}

/* Whiteboard Theme */
.theme-whiteboard {
    --bg-color: #f5f5f5;
    --container-bg: #fff;
    --text-color: #2c3e50;
    --text-light: #2c3e50;
    --btn-bg: #fff;
    --btn-hover: #f0f0f0;
    --cell-bg: transparent;
    --tile-2: #fff;
    --tile-4: #fff;
    --tile-8: #ff6b6b;
    --tile-16: #4ecdc4;
    --tile-32: #45b7d1;
    --tile-64: #96ceb4;
    --tile-128: #ffeaa7;
    --tile-256: #dfe6e9;
    --tile-512: #fd79a8;
    --tile-1024: #a29bfe;
    --tile-2048: #ffd93d;
    --tile-super: #ffd93d;
    --tile-shadow: none;
    --title-color: #2c3e50;
    --score-bg: #fff;
    --font-family: 'Caveat', 'Patrick Hand', cursive;
    --tile-radius: 8px;
    --tile-font-weight: bold;
    --cell-border: 2px solid #bdc3c7;
    --tile-border: 2px solid #2c3e50;
}

/* Kids Drawing Theme */
.theme-kids {
    --bg-color: #fffef0;
    --container-bg: #fff9c4;
    --text-color: #5d4e37;
    --text-light: #5d4e37;
    --btn-bg: #ffccbc;
    --btn-hover: #ffab91;
    --cell-bg: transparent;
    --tile-2: #ffcdd2;
    --tile-4: #ffe082;
    --tile-8: #ce93d8;
    --tile-16: #9fa8da;
    --tile-32: #81d4fa;
    --tile-64: #80cbc4;
    --tile-128: #a5d6a7;
    --tile-256: #fff176;
    --tile-512: #ffab91;
    --tile-1024: #f48fb1;
    --tile-2048: #ffd54f;
    --tile-super: #ffd54f;
    --tile-shadow: none;
    --title-color: #e91e63;
    --score-bg: #c8e6c9;
    --font-family: 'Indie Flower', 'Comic Sans MS', cursive;
    --tile-radius: 12px;
    --tile-font-weight: bold;
    --cell-border: 3px solid #8d6e63;
    --tile-border: 3px solid #5d4e37;
}

/* Crayon Theme */
.theme-crayon {
    --bg-color: #f5f5dc;
    --container-bg: #f0ead6;
    --text-color: #333;
    --text-light: #333;
    --btn-bg: #fce4ec;
    --btn-hover: #f8bbd9;
    --cell-bg: transparent;
    --tile-2: #ffcdd2;
    --tile-4: #fff176;
    --tile-8: #ff7043;
    --tile-16: #ec407a;
    --tile-32: #ab47bc;
    --tile-64: #5c6bc0;
    --tile-128: #29b6f6;
    --tile-256: #26a69a;
    --tile-512: #9ccc65;
    --tile-1024: #ffee58;
    --tile-2048: #ffa726;
    --tile-super: #ffa726;
    --tile-shadow: none;
    --title-color: #e91e63;
    --score-bg: #e1f5fe;
    --font-family: 'Caveat', 'Indie Flower', cursive;
    --tile-radius: 0;
    --tile-font-weight: bold;
    --cell-border: none;
    --tile-border: none;
}

html, body {
    height: 100%;
    overflow: hidden;
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-color);
    color: var(--text-color);
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s ease;
}

.container {
    max-width: 500px;
    width: 100%;
    padding: 20px;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.title {
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1;
}

.title-digits {
    font-size: 4rem;
    font-weight: bold;
    color: var(--title-color);
    transition: color 0.3s ease;
}

.title-digits .digit {
    display: inline-block;
}

.title-fusion {
    font-size: 1.2rem;
    font-weight: 600;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--title-color);
    opacity: 0.8;
    margin-top: 2px;
}

.scores {
    display: flex;
    gap: 10px;
}

.score-box {
    background-color: var(--score-bg);
    padding: 10px 20px;
    border-radius: 6px;
    text-align: center;
    min-width: 80px;
    transition: background-color 0.3s ease;
}

.score-label {
    display: block;
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-light);
    opacity: 0.7;
}

.score-value {
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-light);
}

.controls {
    display: flex;
    gap: 8px;
    margin-bottom: 20px;
    align-items: center;
    flex-wrap: nowrap;
}

.btn {
    background-color: var(--btn-bg);
    color: var(--text-light);
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.btn:hover:not(:disabled) {
    background-color: var(--btn-hover);
}

.btn:active:not(:disabled) {
    transform: scale(0.98);
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.undo-icon {
    display: none;
}

.theme-selector {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 6px;
}

.theme-selector label {
    font-size: 0.8rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
}

.theme-selector select {
    padding: 6px 8px;
    border-radius: 6px;
    border: none;
    background-color: var(--btn-bg);
    color: var(--text-light);
    font-size: 0.8rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
    cursor: pointer;
    max-width: 130px;
}

.game-container {
    position: relative;
    background-color: var(--container-bg);
    border-radius: 6px;
    padding: 15px;
    transition: background-color 0.3s ease;
}

.grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 15px;
    aspect-ratio: 1;
}

.cell {
    background-color: var(--cell-bg);
    border-radius: var(--tile-radius);
    border: var(--cell-border);
    transition: background-color 0.3s ease, border-radius 0.3s ease;
}

.tile {
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5rem;
    font-weight: var(--tile-font-weight);
    border-radius: var(--tile-radius);
    transition: top 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                left 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                border-radius 0.3s ease;
    user-select: none;
    border: var(--tile-border);
    z-index: 10;
}

.tile-2 { background-color: var(--tile-2); color: var(--text-color); }
.tile-4 { background-color: var(--tile-4); color: var(--text-color); }
.tile-8 { background-color: var(--tile-8); color: var(--text-light); }
.tile-16 { background-color: var(--tile-16); color: var(--text-light); }
.tile-32 { background-color: var(--tile-32); color: var(--text-light); }
.tile-64 { background-color: var(--tile-64); color: var(--text-light); }
.tile-128 { background-color: var(--tile-128); color: var(--text-light); font-size: 2rem; }
.tile-256 { background-color: var(--tile-256); color: var(--text-light); font-size: 2rem; }
.tile-512 { background-color: var(--tile-512); color: var(--text-light); font-size: 2rem; }
.tile-1024 { background-color: var(--tile-1024); color: var(--text-light); font-size: 1.75rem; }
.tile-2048 { background-color: var(--tile-2048); color: var(--text-light); font-size: 1.75rem; }
.tile-super { background-color: var(--tile-super); color: var(--text-light); font-size: 1.5rem; }

/* Neon glow effects */
.theme-neon .tile {
    box-shadow: var(--tile-shadow);
    text-shadow: 0 0 10px currentColor;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.theme-neon .instructions {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.theme-neon .title-digits {
    font-family: 'Neonderthaw', cursive;
    font-size: 5rem;
    letter-spacing: 0.02em;
    text-shadow: 0 0 20px var(--title-color), 0 0 40px var(--title-color);
    animation: neon-flicker 3s infinite;
}

.theme-neon .title-digits .d-2 { color: #ff00ff; text-shadow: 0 0 20px #ff00ff, 0 0 40px #ff00ff; }
.theme-neon .title-digits .d-0 { color: #00ffff; text-shadow: 0 0 20px #00ffff, 0 0 40px #00ffff; }
.theme-neon .title-digits .d-4 { color: #ff6600; text-shadow: 0 0 20px #ff6600, 0 0 40px #ff6600; }
.theme-neon .title-digits .d-8 { color: #00ff66; text-shadow: 0 0 20px #00ff66, 0 0 40px #00ff66; }

.theme-neon .title-fusion {
    font-family: 'Tilt Neon', sans-serif;
    font-size: 1.8rem;
    color: #fff;
    text-shadow: 0 0 10px #fff, 0 0 20px #ff69b4, 0 0 40px #ff69b4;
    letter-spacing: 0.3em;
}

.theme-neon .btn {
    background: linear-gradient(135deg, #ff00ff, #ff69b4);
    border: 2px solid #ff69b4;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.6), 0 0 40px rgba(255, 105, 180, 0.4), inset 0 0 15px rgba(255, 255, 255, 0.2);
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
    color: #fff;
}

.theme-neon .btn:hover:not(:disabled) {
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.8), 0 0 60px rgba(255, 105, 180, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.3);
    transform: scale(1.02);
}

.theme-neon .theme-selector select {
    background: linear-gradient(135deg, #ff00ff, #ff69b4);
    border: 2px solid #ff69b4;
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.6), 0 0 40px rgba(255, 105, 180, 0.4);
    color: #fff;
}

.theme-neon .score-box {
    border: 2px solid rgba(255, 0, 255, 0.6);
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.4), 0 0 40px rgba(255, 105, 180, 0.2);
}

@keyframes neon-flicker {
    0%, 18%, 22%, 25%, 53%, 57%, 100% {
        opacity: 1;
        text-shadow: 0 0 20px currentColor, 0 0 40px currentColor, 0 0 60px currentColor;
    }
    20%, 24%, 55% {
        opacity: 0.7;
        text-shadow: 0 0 10px currentColor;
    }
}

/* Minesweeper special styling */
.theme-minesweeper .tile {
    box-shadow: inset -2px -2px 0 #808080, inset 2px 2px 0 #fff;
    border: none;
}

.theme-minesweeper .tile-2 { color: #0000ff; }
.theme-minesweeper .tile-4 { color: #008000; }
.theme-minesweeper .tile-8 { color: #ff0000; }
.theme-minesweeper .tile-16 { color: #000080; }
.theme-minesweeper .tile-32 { color: #800000; }
.theme-minesweeper .tile-64 { color: #008080; }
.theme-minesweeper .tile-128 { color: #000; }
.theme-minesweeper .tile-256 { color: #808080; }

.theme-minesweeper .btn {
    box-shadow: inset -2px -2px 0 #808080, inset 2px 2px 0 #fff;
    border: none;
}

.theme-minesweeper .btn:active:not(:disabled) {
    box-shadow: inset 2px 2px 0 #808080, inset -2px -2px 0 #fff;
}

.theme-minesweeper .score-box {
    box-shadow: inset 2px 2px 0 #808080, inset -2px -2px 0 #fff;
    background: #000;
}

.theme-minesweeper .score-label {
    color: #ff0000;
}

.theme-minesweeper .score-value {
    color: #ff0000;
    font-family: 'Digital-7', 'Consolas', monospace;
}

.theme-minesweeper select {
    background: #fff;
    border: none;
    border-radius: 0;
    color: #000;
    box-shadow: inset -1px -1px 0 #fff, inset 1px 1px 0 #808080, inset -2px -2px 0 #dfdfdf, inset 2px 2px 0 #000;
}

/* Terminal special effects */
.theme-terminal .tile {
    box-shadow: var(--tile-shadow);
}

.theme-terminal .tile-2048,
.theme-terminal .tile-super {
    color: #0d0d0d;
}

.theme-terminal .title-digits {
    text-shadow: 0 0 10px var(--title-color);
    white-space: nowrap;
    font-size: 3.5rem;
}

.theme-terminal .title-digits::before {
    content: '$';
    margin-right: 0;
    font-size: 0.8em;
}

.theme-terminal .title-fusion {
    opacity: 0.7;
}

.theme-terminal .title-fusion::before {
    content: '// ';
}

.theme-terminal .btn {
    background: transparent;
    border: 1px solid var(--title-color);
    border-radius: 0;
    color: var(--title-color);
    font-family: 'Courier New', monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.theme-terminal .btn::before {
    content: '[ ';
}

.theme-terminal .btn::after {
    content: ' ]';
}

.theme-terminal .btn:hover:not(:disabled) {
    background: var(--title-color);
    color: #000;
}

.theme-terminal .theme-selector select {
    background: transparent;
    border: 1px solid var(--title-color);
    border-radius: 0;
    color: var(--title-color);
    font-family: 'Courier New', monospace;
}

.theme-terminal .score-box {
    border: 1px solid var(--title-color);
    border-radius: 0;
}

.theme-terminal .score-label::before {
    content: '$ ';
}

/* Game Boy special effects */
.theme-gameboy .game-container {
    border-radius: 0;
}

.theme-gameboy .tile {
    image-rendering: pixelated;
    box-shadow: inset -2px -2px 0 rgba(0, 0, 0, 0.2);
    font-size: 1.2rem;
    color: #0f380f;
    border-radius: 0;
}

/* Game Boy tile text - lighter tiles get dark text, darker tiles get light text */
.theme-gameboy .tile-2,
.theme-gameboy .tile-4,
.theme-gameboy .tile-8,
.theme-gameboy .tile-16 { color: #0f380f; }

.theme-gameboy .tile-32,
.theme-gameboy .tile-64,
.theme-gameboy .tile-128,
.theme-gameboy .tile-256,
.theme-gameboy .tile-512,
.theme-gameboy .tile-1024,
.theme-gameboy .tile-2048,
.theme-gameboy .tile-super { color: #9bbc0f; }

.theme-gameboy .title-digits {
    letter-spacing: 4px;
    font-size: 2rem;
}

.theme-gameboy .title-fusion {
    letter-spacing: 0.3em;
    text-transform: uppercase;
    font-size: 0.7rem;
}

.theme-gameboy .btn {
    font-family: 'Press Start 2P', monospace;
    font-size: 0.5rem;
    padding: 8px 10px;
    border: 2px solid #0f380f;
    border-radius: 0;
    text-transform: uppercase;
}

.theme-gameboy .btn::before {
    content: '▶ ';
}

.theme-gameboy select {
    font-size: 0.75rem;
    border: 2px solid #0f380f;
    border-radius: 0;
    background: #9bbc0f;
    padding: 4px 6px;
    color: #0f380f;
}

.theme-gameboy .score-box {
    border: 2px solid #0f380f;
    border-radius: 0;
}

.theme-gameboy .score-label {
    font-size: 0.5rem;
}

.theme-gameboy .score-value {
    font-size: 0.8rem;
}

.theme-gameboy .controls label {
    font-size: 0.8rem;
}

/* Windows XP special effects */
.theme-winxp .tile {
    box-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.5),
                inset -1px -1px 0 rgba(0, 0, 0, 0.1),
                1px 1px 3px rgba(0, 0, 0, 0.2);
}

.theme-winxp .btn {
    background: linear-gradient(180deg, #fff 0%, #ece9d8 50%, #d4d0c8 100%);
    border: 1px solid #003c74;
    border-radius: 3px;
    box-shadow: inset 1px 1px 0 #fff;
    color: #000;
}

.theme-winxp .score-box {
    border-radius: 3px;
    box-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.3);
}

.theme-winxp .title-digits {
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    font-weight: bold;
}

.theme-winxp .title-digits .d-2 { color: #f03030; }
.theme-winxp .title-digits .d-0 { color: #00a000; }
.theme-winxp .title-digits .d-4 { color: #0060d0; }
.theme-winxp .title-digits .d-8 { color: #ffb800; }

.theme-winxp .title-fusion {
    color: #fff;
    font-weight: bold;
    font-style: italic;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.theme-winxp .game-container {
    border-radius: 3px;
    box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
}

.theme-winxp select {
    background: #fff;
    border: 1px solid #7f9db9;
    border-radius: 0;
    color: #000;
}

.theme-winxp .theme-selector label {
    color: #fff;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

/* Whiteboard special effects */
.theme-whiteboard .tile {
    border-radius: 45% 55% 50% 50% / 55% 45% 55% 45%;
    transform: rotate(-1deg);
}

.theme-whiteboard .tile:nth-child(odd) {
    transform: rotate(1deg);
    border-radius: 55% 45% 50% 50% / 45% 55% 45% 55%;
}

.theme-whiteboard .cell {
    border-radius: 45% 55% 50% 50% / 55% 45% 55% 45%;
    border-style: dashed;
}

.theme-whiteboard .btn {
    border: 2px solid #2c3e50;
    border-radius: 40% 60% 55% 45% / 55% 45% 60% 40%;
}

.theme-whiteboard .title-digits {
    font-size: 4.5rem;
    transform: rotate(-2deg);
}

.theme-whiteboard .title-fusion {
    transform: rotate(-1deg);
    margin-left: 8px;
}

.theme-whiteboard .game-container {
    border: 3px solid #2c3e50;
    border-radius: 2% 3% 2% 3%;
    box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.1);
}

.theme-whiteboard .score-box {
    border: 2px solid #2c3e50;
    border-radius: 50% 50% 45% 55% / 45% 55% 50% 50%;
}

/* Kids Drawing special effects */
.theme-kids .tile {
    border-radius: 40% 60% 55% 45% / 50% 50% 55% 45%;
    transform: rotate(-2deg);
    border-style: solid;
    border-width: 3px 4px 4px 3px;
}

.theme-kids .tile:nth-child(even) {
    transform: rotate(2deg);
    border-radius: 55% 45% 50% 50% / 45% 55% 50% 50%;
}

.theme-kids .tile:nth-child(3n) {
    transform: rotate(-1deg);
}

.theme-kids .cell {
    border-radius: 45% 55% 50% 50% / 50% 50% 55% 45%;
    border-style: dashed;
}

.theme-kids .btn {
    border: 3px solid #5d4e37;
    border-radius: 30% 70% 60% 40% / 50% 50% 60% 40%;
    transform: rotate(-1deg);
}

.theme-kids .title-digits {
    font-size: 5rem;
    transform: rotate(-3deg);
}

.theme-kids .title-digits .d-2 { color: #e53935; text-shadow: 3px 3px 0 #ffcc80; }
.theme-kids .title-digits .d-0 { color: #43a047; text-shadow: 3px 3px 0 #ffcc80; }
.theme-kids .title-digits .d-4 { color: #1e88e5; text-shadow: 3px 3px 0 #ffcc80; }
.theme-kids .title-digits .d-8 { color: #fb8c00; text-shadow: 3px 3px 0 #ffcc80; }

.theme-kids .title-fusion {
    font-size: 1.4rem;
    transform: rotate(2deg);
    color: #8e24aa;
    text-shadow: 2px 2px 0 #ffcc80;
}

.theme-kids .game-container {
    border: 4px solid #8d6e63;
    border-radius: 3% 2% 4% 2%;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.15);
    transform: rotate(0.5deg);
}

.theme-kids .score-box {
    border: 3px solid #5d4e37;
    border-radius: 60% 40% 55% 45% / 45% 55% 45% 55%;
    transform: rotate(1deg);
}

/* Crayon special effects */
.theme-crayon .tile {
    border-radius: 35% 65% 60% 40% / 50% 50% 60% 40%;
    box-shadow:
        inset 2px 2px 4px rgba(255, 255, 255, 0.5),
        inset -2px -2px 4px rgba(0, 0, 0, 0.1),
        3px 3px 0 rgba(0, 0, 0, 0.1);
    transform: rotate(-1deg);
}

.theme-crayon .tile:nth-child(odd) {
    border-radius: 60% 40% 45% 55% / 55% 45% 55% 45%;
    transform: rotate(1.5deg);
}

.theme-crayon .cell {
    border: none;
}

.theme-crayon .btn {
    border: none;
    border-radius: 40% 60% 55% 45% / 50% 50% 55% 45%;
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.15);
    transform: rotate(-0.5deg);
}

.theme-crayon .title-digits {
    font-size: 5rem;
    transform: rotate(-2deg);
}

.theme-crayon .title-digits .d-2 { color: #e53935; text-shadow: 3px 3px 0 #ffcc80; }
.theme-crayon .title-digits .d-0 { color: #7cb342; text-shadow: 3px 3px 0 #81d4fa; }
.theme-crayon .title-digits .d-4 { color: #1e88e5; text-shadow: 3px 3px 0 #ffcc80; }
.theme-crayon .title-digits .d-8 { color: #ff9800; text-shadow: 3px 3px 0 #81d4fa; }

.theme-crayon .title-fusion {
    transform: rotate(1deg);
    color: #8e24aa;
}

.theme-crayon .game-container {
    border: none;
    box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.1);
    transform: rotate(0.3deg);
}

.theme-crayon .score-box {
    border-radius: 50% 50% 45% 55% / 45% 55% 50% 50%;
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.1);
}

/* Cherry Blossom special effects */
.theme-cherry-blossom .tile {
    box-shadow: var(--tile-shadow);
    border: 3px solid rgba(255, 255, 255, 0.5);
}

.theme-cherry-blossom .cell {
    border-radius: 50%;
}

.theme-cherry-blossom .title-digits {
    font-size: 4rem;
    text-shadow: 2px 2px 0 #fff, 4px 4px 0 rgba(255, 105, 180, 0.3);
}

.theme-cherry-blossom .title-digits .d-2 { color: #ff69b4; }
.theme-cherry-blossom .title-digits .d-0 { color: #ff85c1; }
.theme-cherry-blossom .title-digits .d-4 { color: #ff1493; }
.theme-cherry-blossom .title-digits .d-8 { color: #ff69b4; }

.theme-cherry-blossom .title-fusion {
    color: #d63384;
    font-style: italic;
    letter-spacing: 0.3em;
}

.theme-cherry-blossom .btn {
    background: linear-gradient(135deg, #ff69b4, #ff85c1);
    border: 2px solid #fff;
    border-radius: 20px;
    color: #fff;
    font-family: 'Dancing Script', cursive;
    font-size: 0.9rem;
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

.theme-cherry-blossom .btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #ff85c1, #ffa6d1);
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 105, 180, 0.5);
}

.theme-cherry-blossom .btn::before {
    content: '✿ ';
}

.theme-cherry-blossom .btn::after {
    content: ' ✿';
}

.theme-cherry-blossom select {
    background: linear-gradient(135deg, #ff69b4, #ff85c1);
    border: 2px solid #fff;
    border-radius: 20px;
    color: #fff;
}

.theme-cherry-blossom .score-box {
    background: linear-gradient(135deg, #ff69b4, #ff85c1);
    border: 2px solid #fff;
    border-radius: 15px;
}

.theme-cherry-blossom .score-label,
.theme-cherry-blossom .score-value {
    color: #fff;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

.theme-cherry-blossom .controls label {
    font-family: 'Dancing Script', cursive;
    font-weight: 700;
    color: #d63384;
}

/* Aurora special effects */
.theme-aurora .tile {
    box-shadow: var(--tile-shadow);
    text-shadow: 0 0 10px currentColor;
}

.theme-aurora .title-digits {
    text-shadow: 0 0 20px var(--title-color), 0 0 40px var(--title-color);
}

.theme-aurora .title-digits .d-2 { color: #00ff87; text-shadow: 0 0 20px #00ff87, 0 0 40px #00ff87; }
.theme-aurora .title-digits .d-0 { color: #60efff; text-shadow: 0 0 20px #60efff, 0 0 40px #60efff; }
.theme-aurora .title-digits .d-4 { color: #ff00ff; text-shadow: 0 0 20px #ff00ff, 0 0 40px #ff00ff; }
.theme-aurora .title-digits .d-8 { color: #00ff87; text-shadow: 0 0 20px #00ff87, 0 0 40px #00ff87; }

.theme-aurora .title-fusion {
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.theme-aurora .btn {
    background: linear-gradient(135deg, #00ff87, #60efff);
    border: none;
    color: #0a0a1a;
    font-weight: bold;
    box-shadow: 0 0 20px rgba(0, 255, 135, 0.4), 0 0 40px rgba(96, 239, 255, 0.2);
}

.theme-aurora .btn:hover:not(:disabled) {
    box-shadow: 0 0 30px rgba(0, 255, 135, 0.6), 0 0 60px rgba(96, 239, 255, 0.4);
}

.theme-aurora .theme-selector select {
    background: linear-gradient(135deg, #60efff, #ff00ff);
    border: none;
    color: #fff;
    font-weight: bold;
    box-shadow: 0 0 15px rgba(96, 239, 255, 0.4);
}

.theme-aurora .score-box {
    border: 2px solid rgba(0, 255, 135, 0.3);
    box-shadow: 0 0 15px rgba(0, 255, 135, 0.2);
}

/* Glassmorphism special effects */
.theme-glass {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.theme-glass .tile {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--tile-shadow);
}

.theme-glass .game-container {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

.theme-glass .score-box {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.theme-glass .title-fusion {
    font-weight: 300;
    opacity: 0.9;
}

/* Vaporwave special effects */
.theme-vaporwave .tile {
    box-shadow: var(--tile-shadow);
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
}

/* Clashing vaporwave tile text colors */
.theme-vaporwave .tile-2 { color: #01cdfe; }      /* cyan on pink */
.theme-vaporwave .tile-4 { color: #ff71ce; }      /* pink on cyan */
.theme-vaporwave .tile-8 { color: #b967ff; }      /* purple on green */
.theme-vaporwave .tile-16 { color: #05ffa1; }     /* green on purple */
.theme-vaporwave .tile-32 { color: #ff71ce; }     /* pink on yellow */
.theme-vaporwave .tile-64 { color: #01cdfe; }     /* cyan on pink */
.theme-vaporwave .tile-128 { color: #fffb96; }    /* yellow on cyan */
.theme-vaporwave .tile-256 { color: #ff71ce; }    /* pink on green */
.theme-vaporwave .tile-512 { color: #05ffa1; }    /* green on purple */
.theme-vaporwave .tile-1024 { color: #b967ff; }   /* purple on yellow */
.theme-vaporwave .tile-2048 { color: #ff71ce; }   /* pink on white */
.theme-vaporwave .tile-super { color: #01cdfe; }  /* cyan on hot pink */

.theme-vaporwave .title-digits {
    text-shadow: 4px 4px 0 #01cdfe, -2px -2px 0 #ff71ce;
    letter-spacing: 8px;
}

.theme-vaporwave .title-fusion {
    color: #01cdfe;
    text-shadow: 2px 2px 0 #ff71ce;
    letter-spacing: 0.6em;
}

/* Blueprint special effects */
.theme-blueprint .tile-2048,
.theme-blueprint .tile-super {
    color: #1e4d78;
}

.theme-blueprint .game-container {
    background-image:
        linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
}

.theme-blueprint .title-digits {
    font-weight: normal;
    letter-spacing: 2px;
}

.theme-blueprint .title-fusion {
    font-weight: normal;
    letter-spacing: 0.4em;
    text-transform: uppercase;
}

/* Vaporwave button styles */
.theme-vaporwave .btn {
    background: linear-gradient(135deg, #b967ff, #ff71ce);
    border: none;
    color: #fff;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 2px;
    box-shadow: 4px 4px 0 #01cdfe, -2px -2px 0 #05ffa1;
    text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
}

.theme-vaporwave .btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #c77dff, #ff8ad8);
    box-shadow: 6px 6px 0 #01cdfe, -3px -3px 0 #05ffa1;
    transform: translate(-2px, -2px);
}

.theme-vaporwave select {
    background: linear-gradient(135deg, #b967ff, #ff71ce);
    border: none;
    color: #fff;
    font-weight: bold;
    box-shadow: 3px 3px 0 #01cdfe;
}

/* Blueprint button styles */
.theme-blueprint .btn {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.8);
    border-radius: 0;
    color: #fff;
    font-family: 'Courier New', monospace;
    font-weight: normal;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.theme-blueprint .btn:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.1);
    border-color: #fff;
}

.theme-blueprint select {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.8);
    border-radius: 0;
    color: #fff;
    font-family: 'Courier New', monospace;
}

.theme-blueprint .score-box {
    border: 2px solid rgba(255, 255, 255, 0.8);
    border-radius: 0;
}

/* Animations */
.shake-left {
    animation: shake-horizontal 0.2s ease-in-out;
}

.shake-right {
    animation: shake-horizontal 0.2s ease-in-out;
}

.shake-up {
    animation: shake-vertical 0.2s ease-in-out;
}

.shake-down {
    animation: shake-vertical 0.2s ease-in-out;
}

@keyframes shake-horizontal {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    75% { transform: translateX(4px); }
}

@keyframes shake-vertical {
    0%, 100% { transform: translateY(0); }
    25% { transform: translateY(-4px); }
    75% { transform: translateY(4px); }
}

.tile-new {
    animation: tile-appear 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.tile-merged {
    animation: tile-pop 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 20;
}

@keyframes tile-appear {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes tile-pop {
    0% {
        transform: scale(1);
    }
    40% {
        transform: scale(1.25);
    }
    100% {
        transform: scale(1);
    }
}

/* Game over / win overlay */
.game-message {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0.85);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 6px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 100;
}

.game-message.active {
    opacity: 1;
    pointer-events: auto;
}

.game-message p {
    font-size: 3rem;
    font-weight: bold;
    color: var(--text-color);
    margin-bottom: 20px;
}

.theme-neon .game-message {
    background-color: rgba(10, 10, 15, 0.95);
}

.theme-terminal .game-message {
    background-color: rgba(13, 13, 13, 0.95);
}

.theme-ocean .game-message,
.theme-forest .game-message,
.theme-sunset .game-message {
    background-color: rgba(0, 0, 0, 0.85);
}

.theme-blueprint .game-message {
    background-color: rgba(30, 77, 120, 0.95);
    color: #fff;
}

.theme-blueprint .game-message p {
    color: #fff;
}

.theme-glass .game-message {
    background-color: rgba(102, 126, 234, 0.95);
}

.theme-glass .game-message p {
    color: #fff;
}

.instructions {
    margin-top: 20px;
    text-align: center;
    font-size: 0.9rem;
    opacity: 0.7;
}

.instructions p {
    margin: 5px 0;
}

.instructions-mobile {
    display: none;
}

@media (hover: none) and (pointer: coarse) {
    .instructions-desktop {
        display: none;
    }
    .instructions-mobile {
        display: block;
    }
}

/* Score addition animation */
.score-addition {
    position: absolute;
    right: 0;
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--text-light);
    animation: score-float 0.8s ease-out forwards;
    pointer-events: none;
}

.theme-minesweeper .score-addition {
    color: #00ff00;
    text-shadow: 0 0 2px #000;
}

.theme-lavender .score-addition {
    color: var(--title-color);
}

@keyframes score-float {
    0% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(-30px); }
}

/* Responsive */
@media (max-width: 520px) {
    .container {
        padding: 10px;
    }

    .title-digits {
        font-size: 2.5rem;
    }

    .title-fusion {
        font-size: 0.9rem;
    }

    .grid {
        gap: 10px;
    }

    .game-container {
        padding: 10px;
    }

    .tile {
        font-size: 1.75rem;
    }

    .tile-128, .tile-256, .tile-512 {
        font-size: 1.5rem;
    }

    .tile-1024, .tile-2048, .tile-super {
        font-size: 1.25rem;
    }

    .controls {
        flex-wrap: nowrap;
        gap: 8px;
    }

    .btn {
        padding: 10px 12px;
        font-size: 0.85rem;
    }

    .undo-text {
        display: none;
    }

    .undo-icon {
        display: inline;
    }

    .theme-selector {
        margin-left: auto;
    }

    .theme-selector label {
        display: none;
    }

    .theme-selector select {
        padding: 8px 10px;
        font-size: 0.85rem;
    }
}
